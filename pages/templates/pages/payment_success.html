{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <div class="card shadow">
        <div class="card-body text-center">
            <div class="alert alert-success">
                <h2><i class="fas fa-check-circle"></i> Payment Successful!</h2>
                <p class="lead">Your ticket has been confirmed</p>
            </div>

            <!-- Ticket Information -->
            <div class="ticket-info mb-4 p-3 bg-light rounded">
                <h4>{{ transaction.ticket.name }}</h4>
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Type:</strong> {{ transaction.ticket.get_ticket_type_display }}</p>
                        <p><strong>Date:</strong> {{ transaction.ticket.date|date:"F j, Y" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Location:</strong> {{ transaction.ticket.location }}</p>
                        <p><strong>Price:</strong> {{ transaction.formatted_price }}</p>
                    </div>
                </div>
            </div>

            <!-- QR Code Section -->
            <div class="qr-section mb-4 p-3 border rounded">
                <h4>Your Digital Ticket</h4>
                <img src="data:image/png;base64,{{ transaction.qr_code }}" 
                     alt="QR Code" class="img-fluid mx-auto d-block" style="max-width: 250px;">
                <div class="ticket-code mt-3 p-2 bg-dark text-white rounded">
                    <strong>Ticket Code:</strong> {{ transaction.ticket_code }}
                </div>
                <small class="text-muted">Present this QR code or number at the entrance</small>
            </div>

            <!-- Action Buttons -->
            <div class="mt-4">
                <a href="{% url 'ticket_list' %}" class="btn btn-primary me-2">
                    <i class="fas fa-ticket-alt"></i> View All Tickets
                </a>
                <button onclick="window.print()" class="btn btn-outline-secondary me-2">
                    <i class="fas fa-print"></i> Print Ticket
                </button>
                <a href="{% url 'ticket_list' %}" class="btn btn-outline-primary">
                    <i class="fas fa-arrow-left"></i> Back to Events
                </a>
            </div>
        </div>
    </div>
</div>

<style>
.qr-section {
    max-width: 500px;
    margin: 0 auto;
}
.ticket-code {
    font-family: monospace;
    font-size: 1.1rem;
    letter-spacing: 1px;
}
</style>
{% endblock %}